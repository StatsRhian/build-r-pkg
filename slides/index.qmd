---
title: "Build your own toolbox 🧰"
subtitle: "R package development"
author: "[Dr Rhian Davies](mailto:statsrhian@gmail.com)"
date: 2025-09-03
date-format: "YYYY-MM-DD"
css: styles.css
format: revealjs
brand: ../_brand.yml
execute:
  echo: false
  eval: false
footer: "{{< fa brands github >}} {{< fa brands bluesky >}} {{< fa brands mastodon >}} {{< fa brands linkedin >}} [@statsRhian](https://bsky.app/profile/statsrhian.bsky.social) &nbsp; {{< fa laptop-code >}} [statsrhian.github.io/build-r-pkg](https://statsrhian.github.io/build-r-pkg)"

---

<!--- TO FIX

open with a personal story: “When I first started, I kept copy-pasting functions across projects. Then I realised… a package is just a tidy toolbox!” → hooks people in emotionally.

Active learning: Add short “think-pair-share” moments (“What’s one function you’d put in your personal package?”). Keeps energy up.

Next steps slide: End with clear “where to go from here” (Hadley’s R Packages book, r-pkgs.org, pkgdown, joining rOpenSci, etc.). Helps motivated learners continue.

- should I mention devtools::load_all()
- tidy notes
- add alt text
- teach IMPORTS?
- remove vignette?

Engagement / reflection

I love your hidden reflective slide at the end. I’d actually bring it back in! Even a quick “turn to your neighbour and share one thing you learned” helps solidify learning.

Maybe include a slide with common pitfalls/troubleshooting (“I forgot to run document(), why doesn’t help work?”).


--->

## Set-up 👩‍💻

- Welcome! We'll start the workshop shortly

- If you want to code along with me, please follow the set-up instructions ⬇️

### [statsrhian.github.io/build-r-pkg/set-up](https://statsrhian.github.io/build-r-pkg/set-up)

- If you'd prefer to just want to sit back and watch - that's fine too 😊

# Welcome

## What is an R package?

- A toolbox of useful functions

## Why build one?

- Reproducible
- Reusability across projects
- Testing is easier
- Dependency management
- Easy to use documentation
- It's fun and empowering
- Sharing is caring

## Myths

- Doesn’t have to be on CRAN
- Doesn’t have to have hundreds of functions
- Doesn’t have to be useful for anyone else
- Doesn’t have to do anything fancy
- Doesn’t have to be scary

:::{.notes}
- Small packages are fine!
- Build on the work of others
- Package warnings are okay!
:::

# Your personal toolbox

It’s not just any box of random tools — it’s a kit that someone else should be able to pick up and use immediately without calling you for instructions.

## What's in your toolbox?

:::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
</pre>
```
:::
::: {.column}
![](img/toolbox-closed.jpg){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}
It’s not just any box of random tools, it’s a kit that someone else should be able to pick up and use immediately without calling you for instructions.
:::


## `DESCRIPTION`

:::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
├─ <span class="highlight">DESCRIPTION</span>
</pre>
```
:::
::: {.column}
![](img/toolbox-label.jpg){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}

It lists the brand name (package name), who built it (author), what it’s for (description), model/version number, and what other kits it needs to work with (dependencies).

Without this, no one knows what kind of work the toolbox is meant for, is it for bikes, plumbing, or electronics?
:::

## `R/` folder

:::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
├─ DESCRIPTION
├─ <span class="highlight">R/
│  ├─ chain-braker.R
│  ├─ multitool.R
│  ├─ pedal-wrench.R
│  ├─ tyre-levers.R</span>
</pre>
```
:::
::: {.column}
![](img/toolbox-tools.png){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}
This is where the actual tools (functions) live.

Each tool has a job, each function solves a specific problem.

The better organised and labelled they are, the faster someone can find what they need.
:::


## `man/` folder

:::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
├─ DESCRIPTION
├─ R/
│  ├─ chain-braker.R
│  ├─ multitool.R
│  ├─ pedal-wrench.R
│  ├─ tyre-levers.R
├─ <span class="highlight">man/
│  ├─ chain-braker.Rd
│  ├─ multitool.Rd
│  ├─ pedal-wrench.Rd
│  ├─ tyre-levers.Rd</span>
</pre>
```
:::
::: {.column}
![](img/toolbox-manual.jpg){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}
These tell you what the tool does, how to hold it, and give examples of using it safely.
:::


## `NAMESPACE`

:::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
├─ DESCRIPTION
├─ R/
│  ├─ chain-braker.R
│  ├─ multitool.R
│  ├─ pedal-wrench.R
│  ├─ tyre-levers.R
├─ man/
│  ├─ chain-braker.Rd
│  ├─ multitool.Rd
│  ├─ pedal-wrench.Rd
│  ├─ tyre-levers.Rd
├─ <span class="highlight">NAMESPACE</span>
</pre>
```
:::
::: {.column}
![](img/toolbox-shelf.jpg){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}


- Some tools are kept in plain sight for anyone to grab (exported functions).

- Others are hidden in a secret compartment only you know about (internal functions).

- Sometimes your toolbox doesn’t have everything — you borrow tools from your friends’ toolboxes (imports).

:::

## Extra bits

::::: {.columns}
::: {.column}
```{=html}
<pre>
biketools/
├─ DESCRIPTION
├─ R/
│  ├─ chain-braker.R
│  ├─ multitool.R
│  ├─ pedal-wrench.R
│  ├─ tyre-levers.R
├─ man/
│  ├─ chain-braker.Rd
│  ├─ multitool.Rd
│  ├─ pedal-wrench.Rd
│  ├─ tyre-levers.Rd
├─ NAMESPACE
├─ <span class="highlight">data/
├─ pkgdown/
├─ tests/
├─ vignettes/
├─ READMD.md
├─ NEWS.md
├─ hex-sticker.png</span>
</pre>
```
:::

::: {.column}
![](img/toolbox-extras.jpg){fig-alt="TODO: Add alt text."}
:::
::: 

:::{.notes}

- Do my tools work correctly?
- How to do a basic bike service
- Spare bit of chain for trying chain breaker
- Glossy website
- Cool paint job

:::

# Let's build 🛠️

## 👀 Create an R package

## 👩‍💻 Create an R package

- Run `usethis::create_package("sums")`
- Open the `DESCRIPTION` file and customise it
- Run `usethis::use_mit_license()`
- Run `devtools::install()`

## 👀 Add a function

:::{.notes}

Need to introduce adding functions without getting hung up on 
`#' @export` and `NAMESPACE`

Could manually edit it FIRST `export(hello)` and then show later how it's generated

:::

## 👩‍💻 Add a function

- Create a new file in the `R/` folder

- Write any function

- Run `devtools::install()`

- Try out your function

```
hello <- function() {
print("My first function!")
}
```

## 👀 Document your function

:::{.notes}

```
#' Add together two numbers
#' 
#' @param x A number.
#' @param y A number.
#' @returns A numeric vector.
#' @examples
#' add(1, 1)
#' add(10, 1)
#' @export
add <- function(x, y) {
  x + y
}
```

:::

## 👩‍💻 Document your function

1. Add some {roxygen2} strings

1. Run `devtools::document()`

1. Run `devtools::install()`

1. View the help file `?test`

## Developer process

1.  edit
1. `devtools::document()`
1. `devtools::install()`
1. `devtools::check()`

## Package check

Inspect your toolbox before lending it out!

- Is there anything in there that shouldn't be in there?
- Is it too heavy?
- Does it have all the right instructions?

:::{.notes}

An inspection before lending the box, ensures all tools are there and safe.

If something fails inspection, you get a report telling you exactly what to fix.

- Can someone carry the toolbox?
- Is there anything in there that shouldn't be in there?
- Is it too full?
- Does it have all the right instructions?

:::

## 👀 Package check

## 👩‍💻 Package check

- Run `devtools::check()`

- Don't worry if it doesn't all pass!

## 👩‍💻 Choose your own adventure

::::: {.columns}
::: {.column}


- Create a second function

- Create a vignette `usethis::use_vignette("times-tables")`

- Add a test 

- Create a [hex sticker](https://connect.thinkr.fr/hexmake/)
```
usethis::use_testthat()
usethis::use_test("hello")
```


:::

::: {.column}
![](img/hex-RSSConf2025.png){fig-alt="TODO: Add alt text."}
:::
::: 


## Share your package

- CRAN: `install.packages("biketools.zip")`
- GitHub: `devtools::install_github("statsrhian/biketools")`
- Local install: `devtools::install_local("biketools")`


<!---

## Reflect...
- One thing I learned…
- One thing I want to try later…
- One thing I still have a question about…

--->





